:root {
    --bg: #f0f2f5; --card: #ffffff; --text: #1c1e21;
    --accent: #1a73e8; --border: #ddd;
    --red: #e53935; --blue: #1e88e5; --yellow: #fdd835; 
    --green: #43a047; --white: #fafafa; --black: #263238;
}

body.dark {
    --bg: #121212; --card: #1e1e1e; --text: #e4e6eb; --border: #333;
}

body { margin: 0; font-family: -apple-system, sans-serif; background: var(--bg); color: var(--text); display: flex; flex-direction: column; height: 100vh; overflow-x: hidden;}
header { padding: 15px 20px; display: flex; justify-content: space-between; background: var(--card); border-bottom: 1px solid var(--border); }
.logo { font-weight: 800; }
.logo span { color: var(--accent); }

.viz-card { background: var(--card); margin: 15px; border-radius: 16px; padding: 20px; display: flex; justify-content: center; }
.target-input-card { background: var(--card); margin: 0 15px 15px; padding: 15px; border-radius: 12px; }
.input-group { display: flex; gap: 10px; margin-top: 5px; }
.input-group input { flex: 1; padding: 12px; border: 1px solid var(--border); border-radius: 8px; background: var(--bg); color: var(--text); font-size: 1.1rem; }
#calc-btn { background: var(--accent); color: white; border: none; border-radius: 8px; font-weight: 700; padding: 0 15px; }

.stats-container { text-align: center; margin-bottom: 20px; }
.main-stat { font-size: 3rem; font-weight: 800; color: var(--accent); }

.controls-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; padding: 0 15px 30px; }
.plate-group { display: flex; flex-direction: column; gap: 4px; }
.plate-btn { padding: 12px 0; border: none; border-radius: 8px; font-weight: 800; color: #fff; }
.remove-btn { background: var(--border); border: none; padding: 4px; border-radius: 4px; color: var(--text); font-size: 0.7rem; opacity: 0.8; }

.modal { position: fixed; inset: 0; background: rgba(0,0,0,0.6); display: flex; align-items: center; justify-content: center; z-index: 100; padding: 20px; }
.hidden { display: none; }
.modal-content { background: var(--card); width: 100%; max-width: 400px; padding: 20px; border-radius: 16px; max-height: 90vh; overflow-y: auto; }
.setting-item { margin-top: 20px; }
.segmented-control { display: flex; background: var(--bg); padding: 4px; border-radius: 8px; gap: 4px; }
.segmented-control button { flex: 1; border: none; padding: 8px; background: none; color: var(--text); border-radius: 6px; }
.segmented-control button.active { background: var(--accent); color: white; }

.inventory-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-top: 10px; }
.inv-item { display: flex; align-items: center; justify-content: space-between; background: var(--bg); padding: 8px; border-radius: 6px; }
.inv-item input { width: 40px; background: var(--card); border: 1px solid var(--border); color: var(--text); text-align: center; border-radius: 4px; }
.full-btn { width: 100%; padding: 12px; margin-top: 10px; background: var(--border); border: none; border-radius: 8px; color: var(--text); font-weight: 600; }
.small-note { font-size: 0.7rem; opacity: 0.6; margin-top: 4px; }

.plate-label { font-size: 9px; font-weight: bold; fill: white; text-anchor: middle; pointer-events: none;}
.label-dark { fill: black; }
